<mat-toolbar>
  <span class="toolbar-spacer"></span>
  <span>Medical Entity Extraction</span>
  <span class="toolbar-spacer"></span>

  <button
    mat-icon-button
    class="sidebar-toggle controls-toggle"
    [ngClass]="{'open': isControlsSidebarOpen, 'closed': !isControlsSidebarOpen}"
    (click)="toggleControlsSidebar()"
    [matTooltip]="isControlsSidebarOpen ? 'Collapse Controls' : 'Expand Controls'"
    aria-label="Toggle Controls Sidebar">
    <mat-icon>{{ isControlsSidebarOpen ? 'menu_open' : 'menu' }}</mat-icon>
  </button>

  <button
    mat-icon-button
    class="sidebar-toggle entities-toggle"
    [ngClass]="{'open': isEntitiesSidebarOpen, 'closed': !isEntitiesSidebarOpen}"
    (click)="toggleEntitiesSidebar()"
    [matTooltip]="isEntitiesSidebarOpen ? 'Collapse Entities' : 'Expand Entities'"
    aria-label="Toggle Entities Sidebar">
    <mat-icon>{{ isEntitiesSidebarOpen ? 'menu_open' : 'menu' }}</mat-icon>
  </button>
</mat-toolbar>

<as-split direction="horizontal" class="app-split-container" [useTransition]="true">
  <as-split-area
    [size]="15"
    [minSize]="5"
    [maxSize]="40"
    [visible]="isControlsSidebarOpen"
    class="controls-area sidebar-area">
    <div class="scrollable-content" style="height: 100%; overflow: auto;">
        <app-controls-sidebar
            [isExtracting]="(isExtracting$ | async) ?? false"
            (extractRequested)="handleExtractionRequest($event)">
        </app-controls-sidebar>
    </div>
  </as-split-area>

  <as-split-area
    [size]="65"
    [minSize]="20"
    class="main-content-area scrollable-content">
    <div class="scrollable-content" style="height: 100%; overflow: auto; padding: 16px;">
        <app-results-display
            [isExtracting]="(isExtracting$ | async) ?? false"
            [extractionError]="extractionError$ | async"
            [annotations]="currentAnnotations$ | async" [originalText]="(extractionResult$ | async)?.text ?? null" [entityTypes]="currentSchemaEntityTypes"  [scrollToTarget]="scrollToTarget">
        </app-results-display>
    </div>
  </as-split-area>

  <as-split-area
    [size]="20"
    [minSize]="5"
    [maxSize]="40"
    [visible]="isEntitiesSidebarOpen"
    class="entities-area sidebar-area">
     <div class="scrollable-content" style="height: 100%; overflow: auto;">
        <app-entities-sidebar
            [isExtracting]="(isExtracting$ | async) ?? false"
            [annotations]="currentAnnotations$ | async" (entityClicked)="handleScrollToEntity($event)"> 
           </app-entities-sidebar>
     </div>
  </as-split-area>

</as-split>